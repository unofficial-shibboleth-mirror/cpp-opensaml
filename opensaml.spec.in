Name:		opensaml
Summary:	Open source SAML library
Version:	@-VERSION-@
Release:	2
Group:		System Environment/Libraries
Vendor:		Internet2
License:	Apache 2.0
URL:		http://www.opensaml.org/
Source0:	%{name}-%{version}.tar.gz
BuildRoot:	%{_tmppath}/%{name}-%{version}-root

BuildRequires:	xerces%{?xercesver}-c-devel >= 2.6.1
BuildRequires:	xml-security-c-devel >= 1.3.1
BuildRequires:	xmltooling-devel, cxxtest
%if %{?_with_log4cpp:1}
BuildRequires:	log4cpp-devel >= 0.3.5
%else
BuildRequires:	log4shib-devel
%endif

%description
OpenSAML is an open source implementation of the OASIS Security Assertion
Markup Language Specification. It contains a set of open source C++ classes
that support the SAML 1.0, 1.1, and 2.0 specifications.

This package contains the saml runtime library.

%package devel
Summary: OpenSAML development Headers
Group: Development/Libraries
Requires: %{name} = %{version}

%description devel
OpenSAML is an open source implementation of the OASIS Security Assertion
Markup Language Specification. It contains a set of open source C++ classes
that support the SAML 1.0, 1.1, and 2.0 specifications.

This package contains the headers and other necessary files to build
applications or libraries that use or extend the saml library.

%package docs
Summary: OpenSAML API Documentation
Group: Development/Libraries
Requires: %{name} = %{version}

%description docs
OpenSAML Library API documentation generated by doxygen.

%prep
%setup -q

%build
%configure %{?saml_options}
make

%install
[ "$RPM_BUILD_ROOT" != "/" ] && rm -rf $RPM_BUILD_ROOT
rm -rf _docs
make install DESTDIR=$RPM_BUILD_ROOT
mv $RPM_BUILD_ROOT/usr/doc/%{name} _docs

%check || :
make check

%clean
[ "$RPM_BUILD_ROOT" != "/" ] && rm -rf $RPM_BUILD_ROOT

%post
/sbin/ldconfig

%postun
/sbin/ldconfig

%files
%defattr(-,root,root,-)
%doc _docs/LICENSE.txt _docs/NOTICE.txt
%{_libdir}/libsaml.so.*
%dir %{_datadir}/xml/%{name}
%{_datadir}/xml/%{name}
%exclude %{_bindir}/samltest

%files devel
%defattr(-,root,root,-)
%{_includedir}
%{_libdir}/libsaml.so

%files docs
%defattr(644,root,root,755)
%doc _docs/api

%changelog
* Fri Jul 13 2007  Scott Cantor  <cantor.2@osu.edu>  - 2.0-2
- Second alpha.

* Sun Apr 16 2007  Scott Cantor  <cantor.2@osu.edu>  - 2.0-1
- First SPEC file for 2.0.
