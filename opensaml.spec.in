Name:		opensaml
Summary:	Open source SAML library
Version:	@-VERSION-@
Release:	1
Group:		System Environment/Libraries
Vendor:		Internet2
License:	Apache 2.0
URL:		http://www.opensaml.org/
Source0:	http://shibboleth.internet2.edu/downloads/%{name}-%{version}.tar.gz
Source1:	http://shibboleth.internet2.edu/downloads/%{name}-%{version}.tar.gz.asc
BuildRoot:	%{_tmppath}/%{name}-%{version}-root

BuildRequires:	xerces-c-devel >= 2.6.1
BuildRequires:	xml-security-c-devel >= 1.3.0
BuildRequires:	log4cpp-devel >= 0.3.5
BuildRequires:	xmltooling-devel, cxxtest, doxygen

%description
OpenSAML is an open source implementation of the OASIS Security Assertion
Markup Language Specification. It contains a set of open source C++ classes
that support the SAML 1.0, 1.1, and 2.0 specifications.

This package contains the saml runtime library.

%package devel
Summary: OpenSAML development Headers
Group: Development/Libraries
Requires: %{name} = %{version}

%description devel
OpenSAML is an open source implementation of the OASIS Security Assertion
Markup Language Specification. It contains a set of open source C++ classes
that support the SAML 1.0, 1.1, and 2.0 specifications.

This package contains the headers and other necessary files to build
applications or libraries that use or extend the saml library.

%package docs
Summary: OpenSAML API Documentation
Group: Development/Libraries
Requires: %{name} = %{version}

%description docs
OpenSAML Library API documentation generated by doxygen.

%prep
%setup -q

%build
%configure %{?saml_options}
make

%install
[ "$RPM_BUILD_ROOT" != "/" ] && rm -rf $RPM_BUILD_ROOT
rm -rf _docs

make install DESTDIR=$RPM_BUILD_ROOT
#mv $RPM_BUILD_ROOT/usr/doc/%{name} _docs

%check || :
make check

%clean
[ "$RPM_BUILD_ROOT" != "/" ] && rm -rf $RPM_BUILD_ROOT

%post
/sbin/ldconfig

%postun
/sbin/ldconfig

%files
%defattr(-,root,root,-)
#%doc _docs/LICENSE.txt _docs/NEWS.txt _docs/README.txt _docs/TODO.txt
%{_bindir}/samltest
%{_libdir}/libsaml.so.*
%dir %{_datadir}/xml/%{name}
%{_datadir}/xml/%{name}

%files devel
%defattr(-,root,root,-)
%{_includedir}
%{_libdir}/libsaml.so

%files docs
%defattr(644,root,root,755)
%doc doc/api/*

%changelog
* Sun Apr 16 2006  Scott Cantor  <cantor.2@osu.edu>  - 2.0-1
- First SPEC file for 2.0
